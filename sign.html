<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slide Navbar</title>
    <link rel="stylesheet" type="text/css" href="signin.css">

    <script>

        function isValidEmail(email) {
            var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        function storeData() {

            let users = JSON.parse(localStorage.getItem("users")) || [];

            const userData = {
                username: document.getElementById("username").value,
                email: document.getElementById("email").value,
                password: document.getElementById("password").value
            };

            // Validate email format
            if (!isValidEmail(userData.email)) {
                alert("Please enter a valid email address.");
                return;
            }

            if (userData.username && userData.email && userData.password) {
                users.push(userData);
                localStorage.setItem("users", JSON.stringify(users));
                alert("Data stored successfully!");
            } 
            else {
                alert("Please fill out all fields.");
            }
        }

        function login() {
            const jsonData = localStorage.getItem("users");

            const enteredEmail = document.getElementById("loginEmail").value;
            const enteredPassword = document.getElementById("loginPassword").value;

            if (jsonData) {
                const users = JSON.parse(jsonData);
                const user = users.find(u => u.email === enteredEmail && u.password === enteredPassword);

                if (user) {
                    alert(`Welcome, ${user.username}!`);
                    window.location.href = "main.html";
                } 
                else {
                    alert("Invalid email or password.");
                }
            } 
            
            else {
                alert("No users found. Please sign up first.");
            }
        }
    </script>
</head>
<body>
    <div class="president">
        <div class="captain">
            <div class="area">
                <ul class="squares">
                    <!-- Add more list items if needed -->
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
            </div>
            <div class="mommy">
                <div class="Dandi"></div>
                <div class="First">
                    <div class="Content">
                        <h1>"Register</h1>
                        <h2>To tangle"</h2>
                        <div class="btns">
                            <!-- Google Sign In -->
                            <div class="auth-btn">
                                <img src="images/google-logo.png" alt="Google Logo">
                                <div class="contex">Continue with Google</div>
                            </div><br>
                            <!-- Microsoft Sign In -->
                            <div class="auth-btn">
                                <img src="images/microsoft-logo.png" alt="Microsoft Logo">
                                <div class="contex">Continue with Microsoft</div>
                            </div><br>
                            <!-- Apple Sign In -->
                            <div class="auth-btn">
                                <img src="images/apple-logo.png" alt="Apple Logo">
                                <div class="contex">Continue with Apple</div>
                            </div><br>
                        </div>
                    </div>
                    <div class="main">
                        <input type="checkbox" id="chk" aria-hidden="true">
                        <div class="signup">
                            <form>
                                <label for="chk" aria-hidden="true">Sign up</label>
                                <input type="text" id="username" name="txt" placeholder="User name" required="">
                                <input type="email" id="email" name="email" placeholder="Email" required="">
                                <input type="password" id="password" name="pswd" placeholder="Password" required="">
                                <button type="button" onclick="storeData()">Sign up</button>
                            </form>
                        </div>
                        <div class="login">
                            <form>
                                <label for="chk" aria-button="true">Login</label>
                                <input type="email" id="loginEmail" name="loginEmail" placeholder="Email" required="">
                                <input type="password" id="loginPassword" name="loginPassword" placeholder="Password" required="">
                                <button type="button" onclick="login()">Login</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
